# 9.1 动画技术简介
---

理论基础：视觉残留，即每一幅画面会在人眼中停留大概 $\frac{1}{24}$ 秒

游戏行业的动画理论和工具都来自于电影行业(如：动画电影)

电影中的动画技术发展：
1. 一帧一帧手绘
2. 通过动作演员，动态捕捉

游戏中的动画技术：
1. 捕捉人类行为动画
2. 2d 动画模拟 3d

## 9.1.1 游戏动画中的挑战

挑战：
1. 游戏动画有很强的交互性
2. 游戏动画需要实时($\frac{1}{30}$秒内完成)
3. 游戏动画需要非常真实，包括表情

# 9.2 2D 游戏动画技术
---

## 9.2.1 精灵动画技术

1. 2D应用：我们设计了一系列 Sprite 图片，然后逐帧去播放它
2. 3D 应用：为一个角色录制一系列不同位置的 2D 动画，然后在游戏中根据当前观察的位置播放对应的 2D 动画，以达到一种 3D 的效果
3. 现代游戏中的应用：
	- 2D 背景
	- 3D 环境
	- 特效系统

## 9.2.2 Live2D

它是一个不需要 3D 模型，就可以生成 2D 动画的技术
- 将一个精灵上的各个部分都分离出来，然后组合
- 生成动画的过程，即精灵上这些部分平移和变换的结果

做法：
1. 分离源图像
2. 设置为各种深度
3. 在分离的图像上设置控制点，然后变形图像即可

# 9.3 3D 游戏动画技术
---

DoF：Degrees of Freedom，即自由度
- 3D 空间中有 6 个自由度：平移的 x,y,z ，旋转的 x,y,z

## 9.3.1 刚体层级动画

RHA：(Rigid Hierarchical Animation)，也叫三维骨骼动画

它通过对三维模型建立由多个刚性连接的骨骼系统来实现，每个骨骼与其父骨骼通过关节连接，形成了一个层级结构。

每个骨骼都可以看作是一个刚体，它们之间可以旋转和平移，关节允许不同骨骼之间做相对运动。

它是一个基本的基础，是其他技术的基础

## 9.3.2 逐顶点动画

Per-vertex Animation：它通过操纵网格中每个顶点的位置和法线来实现动画效果

通常使用两个网格，一个作为起始网格，另一个作为结束网格，并将其之间的各个对应的顶点匹配起来

在播放动画的时候，利用插值即可形成平滑的效果

## 9.3.3 变形目标动画

Morph Target Animation：变形目标动画，它通过操纵网格中每个顶点的位置来实现动画效果

它也是一种顶点动画，但是它增加了权重

## 9.3.4 3D 蒙皮动画

3D Skinned Animation：

## 9.3.5 2D 蒙皮动画

和 3D 是通用的

## 9.3.6 基于物理的动画

1. 布娃娃
2. 布料和流体模拟
3. 反向动力学

# 9.4 如何去创造动画
---

## 9.4.1 K 动画

即在编辑器中由动画师 K 动画

## 9.4.2 动作捕捉

# 9.5 蒙皮动画的实现
---

步骤：

每个骨骼都有一个初始状态：绑定姿态(binding pos)

1. 为绑定姿态创建 mesh 网格
2. 为绑定姿态创建骨骼
3. 刷上蒙皮
	- 对每个顶点，都受哪些骨骼的影响
	- 对每个顶点，哪些骨骼影响大，哪些骨骼影响小
4. 

