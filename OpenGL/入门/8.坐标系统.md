# 坐标系统
---

已知前提：我们使用矩阵对位移向量进行变换

目的：OpenGL 希望每次在顶点着色器运行完毕之后，都会得到一个 **标准化设备坐标(NDC)** 的顶点
- 顶点着色器输出的是裁剪坐标形式的坐标，即它是四维空间下表示的 **NDC** 坐标
- 即它还要经过 **透视除法** 这一步的转换，才是三维空间下的 **NDC** 坐标

> 标准化设备坐标：x, y, z 取值范围为\[-1, 1] 的坐标
> NDC 坐标就是裁剪空间下的坐标

这个流程总共需要经过五个不同的坐标系：
1. 局部空间
2. 世界空间
3. 观察空间
4. 裁剪空间
5. 屏幕空间

# 概述
---

将坐标从一个坐标系，变换到另一个坐标系，我们需要使用到变换矩阵：
1. 局部空间 -> 世界空间：模型变换(Model)
2. 世界空间 -> 观察空间：观察变换(View)
3. 观察空间 -> 裁剪空间：投影变换(Projection)
	- 包含了正交变换，即我们不考虑 2D 下的情况，只考虑 3D 下的情况，即一定有投影变换的过程
4. 裁剪空间 -> 屏幕空间(自动进行)：视口变换(Viewport)

- 模型变换：相当于对每个物体单独的仿射变换
- 观察变换：相当于对所有物体共同做仿射变换
- 投影变换：相当于对所有物体做透视变换
	1. 确定物体是否在裁剪范围内
		- 如果有跨越，就对物体做裁剪(猜测)
	2. 对物体做透视变换
	3. 将物体化作裁剪空间的 NDC 坐标
- 视口变换(自动进行)：将裁剪空间下的 NDC 坐标化作屏幕坐标(根据屏幕大小)
	- 变换出来的坐标会被送到光栅器，转化为片段

# 局部空间
---

局部空间是指以物体所在的坐标空间，对应的坐标即 localPosition

模型变换矩阵，指的就是世界空间的基向量和当前局部空间的基向量之间的关系，进行运算就是将局部空间的物体转换到世界空间进行表示

> A 坐标系物体 -> B 坐标系，再用 A 坐标系表示：
> 1. B 坐标系基向量用 A 坐标系基向量表示，确定矩阵
> 2. 矩阵 * 位置向量 = A 坐标系表示在 B 坐标系下的该物体

> 总结：即相当于 A 坐标系带着物体一起变到 B 坐标系后，再用原先的 A 坐标系表示这个物体；该矩阵就是 A 坐标系表示 B 坐标系的基向量。相当于使用了 B 坐标系下的基向量的物体(用 A 坐标系表示)，就是 B 坐标系下的物体(无论它用哪个的坐标系表示)。重点不在物体的坐标，重点在 A，B 两个坐标系之间的关系，即如何用 A 坐标系表示 B 坐标系的基向量